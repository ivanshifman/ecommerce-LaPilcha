{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/api/interceptors/response.ts"],"sourcesContent":["import type { AxiosError, AxiosResponse } from \"axios\";\nimport type { InternalAxiosRequestConfig } from \"axios\";\nimport type { AxiosRequestConfigWithMeta } from \"../types/axiosRequestConfigWithMeta.interface\";\nimport type { ApiErrorResponse } from \"../types/apiErrorResponse.interface\";\nimport { apiClient } from \"../axios-client\";\nimport { useAuthStore } from \"../../store/authStore\";\n\nlet isRefreshing = false;\nlet failedQueue: Array<{\n  resolve: (value?: unknown) => void;\n  reject: (reason?: unknown) => void;\n}> = [];\n\nconst processQueue = (error: AxiosError | null = null) => {\n  failedQueue.forEach((prom) => (error ? prom.reject(error) : prom.resolve()));\n  failedQueue = [];\n};\n\nconst IS_PROD = process.env.NODE_ENV === \"production\" || process.env.NEXT_PUBLIC_ENVIROMENT === \"production\";\n\nexport const responseInterceptor = async (\n  error: AxiosError<ApiErrorResponse>\n) => {\n  const originalRequest = error.config as InternalAxiosRequestConfig & {\n    _retry?: boolean;\n  };\n\n  const { logout } = useAuthStore.getState();\n\n  if (\n    error.response?.status === 401 &&\n    originalRequest.method !== \"get\" &&\n    !originalRequest._retry &&\n    !originalRequest.url?.includes(\"/auth/refresh\") &&\n    !originalRequest.url?.includes(\"/auth/login\")\n  ) {\n    if (isRefreshing) {\n      return new Promise((resolve, reject) =>\n        failedQueue.push({ resolve, reject })\n      )\n        .then(() => apiClient(originalRequest))\n        .catch((err) => Promise.reject(err));\n    }\n\n    originalRequest._retry = true;\n    isRefreshing = true;\n\n    try {\n      await apiClient.post(\"/auth/refresh\");\n      processQueue(null);\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      processQueue(refreshError as AxiosError);\n      await logout();\n      window.location.href = \"/login\";\n      return Promise.reject(refreshError);\n    } finally {\n      isRefreshing = false;\n    }\n  }\n\n  if (error.response?.status === 429) {\n    console.warn(\"‚ö†Ô∏è Rate limit exceeded.\");\n  }\n\n  return Promise.reject(error);\n};\n\nexport const successResponseInterceptor = (\n  response: AxiosResponse<unknown>\n): AxiosResponse<unknown> => {\n  const resConfig = response.config as AxiosRequestConfigWithMeta;\n  if (!IS_PROD && resConfig.metadata) {\n    const duration =\n      new Date().getTime() - resConfig.metadata.startTime.getTime();\n    console.log(\n      `‚úÖ [API Response] ${response.status} ${response.config.url} (${duration}ms)`\n    );\n  }\n  return response;\n};"],"names":[],"mappings":";;;;;;AAIA;AACA;;;AAEA,IAAI,eAAe;AACnB,IAAI,cAGC,EAAE;AAEP,MAAM,eAAe,CAAC,QAA2B,IAAI;IACnD,YAAY,OAAO,CAAC,CAAC,OAAU,QAAQ,KAAK,MAAM,CAAC,SAAS,KAAK,OAAO;IACxE,cAAc,EAAE;AAClB;AAEA,MAAM,UAAU,oDAAyB,gBAAgB,QAAQ,GAAG,CAAC,sBAAsB,KAAK;AAEzF,MAAM,sBAAsB,OACjC;IAEA,MAAM,kBAAkB,MAAM,MAAM;IAIpC,MAAM,EAAE,MAAM,EAAE,GAAG,yIAAY,CAAC,QAAQ;IAExC,IACE,MAAM,QAAQ,EAAE,WAAW,OAC3B,gBAAgB,MAAM,KAAK,SAC3B,CAAC,gBAAgB,MAAM,IACvB,CAAC,gBAAgB,GAAG,EAAE,SAAS,oBAC/B,CAAC,gBAAgB,GAAG,EAAE,SAAS,gBAC/B;QACA,IAAI,cAAc;YAChB,OAAO,IAAI,QAAQ,CAAC,SAAS,SAC3B,YAAY,IAAI,CAAC;oBAAE;oBAAS;gBAAO,IAElC,IAAI,CAAC,IAAM,IAAA,0IAAS,EAAC,kBACrB,KAAK,CAAC,CAAC,MAAQ,QAAQ,MAAM,CAAC;QACnC;QAEA,gBAAgB,MAAM,GAAG;QACzB,eAAe;QAEf,IAAI;YACF,MAAM,0IAAS,CAAC,IAAI,CAAC;YACrB,aAAa;YACb,OAAO,IAAA,0IAAS,EAAC;QACnB,EAAE,OAAO,cAAc;YACrB,aAAa;YACb,MAAM;YACN,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,OAAO,QAAQ,MAAM,CAAC;QACxB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,QAAQ,IAAI,CAAC;IACf;IAEA,OAAO,QAAQ,MAAM,CAAC;AACxB;AAEO,MAAM,6BAA6B,CACxC;IAEA,MAAM,YAAY,SAAS,MAAM;IACjC,IAAI,CAAC,WAAW,UAAU,QAAQ,EAAE;QAClC,MAAM,WACJ,IAAI,OAAO,OAAO,KAAK,UAAU,QAAQ,CAAC,SAAS,CAAC,OAAO;QAC7D,QAAQ,GAAG,CACT,CAAC,iBAAiB,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,MAAM,CAAC,GAAG,CAAC,EAAE,EAAE,SAAS,GAAG,CAAC;IAEhF;IACA,OAAO;AACT"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/api/interceptors/request.ts"],"sourcesContent":["import type { AxiosRequestConfigWithMeta } from \"../types/axiosRequestConfigWithMeta.interface\";\n\nconst IS_PROD = process.env.NODE_ENV === \"production\" || process.env.NEXT_PUBLIC_ENVIROMENT === \"production\";\n\nexport const requestInterceptor = (config: AxiosRequestConfigWithMeta) => {\n  if (!IS_PROD) {\n    config.metadata = { startTime: new Date() };\n    config.headers['Accept'] = 'application/json';\n    console.log(\n      `üöÄ [API Request] ${config.method?.toUpperCase()} ${config.url}`\n    );\n  }\n  return config;\n};"],"names":[],"mappings":";;;;AAEA,MAAM,UAAU,oDAAyB,gBAAgB,QAAQ,GAAG,CAAC,sBAAsB,KAAK;AAEzF,MAAM,qBAAqB,CAAC;IACjC,IAAI,CAAC,SAAS;QACZ,OAAO,QAAQ,GAAG;YAAE,WAAW,IAAI;QAAO;QAC1C,OAAO,OAAO,CAAC,SAAS,GAAG;QAC3B,QAAQ,GAAG,CACT,CAAC,iBAAiB,EAAE,OAAO,MAAM,EAAE,cAAc,CAAC,EAAE,OAAO,GAAG,EAAE;IAEpE;IACA,OAAO;AACT"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/api/axios-client.ts"],"sourcesContent":["import axios from \"axios\";\nimport {\n  responseInterceptor,\n  successResponseInterceptor,\n} from \"./interceptors/response\";\nimport { requestInterceptor } from \"./interceptors/request\";\n\nconst BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api/v1\";\n\nexport const apiClient = axios.create({\n  baseURL: BASE_URL,\n  timeout: 30000,\n  headers: { \"Content-Type\": \"application/json\" },\n  withCredentials: true,\n});\n\napiClient.interceptors.request.use(requestInterceptor);\napiClient.interceptors.response.use(\n  successResponseInterceptor,\n  responseInterceptor\n);"],"names":[],"mappings":";;;;AAAA;AACA;AAIA;;;;AAEA,MAAM,WAAW,oEAAmC;AAE7C,MAAM,YAAY,gJAAK,CAAC,MAAM,CAAC;IACpC,SAAS;IACT,SAAS;IACT,SAAS;QAAE,gBAAgB;IAAmB;IAC9C,iBAAiB;AACnB;AAEA,UAAU,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,2JAAkB;AACrD,UAAU,YAAY,CAAC,QAAQ,CAAC,GAAG,CACjC,oKAA0B,EAC1B,6JAAmB"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/api/error-handler.ts"],"sourcesContent":["import axios from \"axios\";\nimport type { ApiErrorResponse } from \"./types/apiErrorResponse.interface\";\n\nexport const handleApiError = (\n  error: unknown\n): {\n  message: string;\n  statusCode: number;\n  timestamp?: string;\n  path?: string;\n  method?: string;\n  error?: string;\n} => {\n  if (axios.isAxiosError(error)) {\n    const { response, code, message: msg } = error;\n    const data = response?.data as ApiErrorResponse | undefined;\n\n    return {\n      message:\n        data?.message ||\n        (code === \"ECONNABORTED\"\n          ? \"Request timeout\"\n          : code === \"ERR_NETWORK\"\n          ? \"Network error\"\n          : msg),\n      statusCode: data?.statusCode || response?.status || 500,\n      timestamp: data?.timestamp,\n      path: data?.path,\n      method: data?.method,\n      error: data?.error,\n    };\n  }\n\n  return { message: \"Unexpected error occurred\", statusCode: 500 };\n};"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,iBAAiB,CAC5B;IASA,IAAI,gJAAK,CAAC,YAAY,CAAC,QAAQ;QAC7B,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,GAAG,EAAE,GAAG;QACzC,MAAM,OAAO,UAAU;QAEvB,OAAO;YACL,SACE,MAAM,WACN,CAAC,SAAS,iBACN,oBACA,SAAS,gBACT,kBACA,GAAG;YACT,YAAY,MAAM,cAAc,UAAU,UAAU;YACpD,WAAW,MAAM;YACjB,MAAM,MAAM;YACZ,QAAQ,MAAM;YACd,OAAO,MAAM;QACf;IACF;IAEA,OAAO;QAAE,SAAS;QAA6B,YAAY;IAAI;AACjE"}},
    {"offset": {"line": 225, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/api/helper.ts"],"sourcesContent":["export interface ApiResponse<T> {\n    data: T;\n    success: boolean;\n    timestamp: string;\n}\n\nexport const unwrapResponse = <T>(response: ApiResponse<T> | T): T => {\n    if (response && typeof response === 'object' && 'data' in response) {\n        return (response as ApiResponse<T>).data;\n    }\n    return response as T;\n};"],"names":[],"mappings":";;;;AAMO,MAAM,iBAAiB,CAAI;IAC9B,IAAI,YAAY,OAAO,aAAa,YAAY,UAAU,UAAU;QAChE,OAAO,AAAC,SAA4B,IAAI;IAC5C;IACA,OAAO;AACX"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/services/auth.service.ts"],"sourcesContent":["import { apiClient } from '../api/axios-client';\nimport { handleApiError } from '../api/error-handler';\nimport { ApiResponse, unwrapResponse } from '../api/helper';\nimport type {\n  RegisterDto,\n  LoginDto,\n  VerifyEmailDto,\n  ResendVerificationDto,\n  ForgotPasswordDto,\n  ResetPasswordDto,\n  ChangePasswordDto,\n  UpdateUserDto,\n  AuthResponse,\n  RegisterResponse,\n  ProfileResponse,\n} from '../types/auth.types';\n\nexport const authService = {\n  register: async (data: RegisterDto): Promise<RegisterResponse> => {\n    try {\n      const response = await apiClient.post<ApiResponse<RegisterResponse>>('/auth/register', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  login: async (data: LoginDto): Promise<AuthResponse> => {\n    try {\n      const response = await apiClient.post<ApiResponse<AuthResponse>>('/auth/login', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  verifyEmail: async (data: VerifyEmailDto): Promise<AuthResponse> => {\n    try {\n      const response = await apiClient.post<ApiResponse<AuthResponse>>('/auth/verify-email', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  resendCode: async (data: ResendVerificationDto): Promise<{ message: string }> => {\n    try {\n      const response = await apiClient.post<{ message: string }>('/auth/resend-code', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  forgotPassword: async (data: ForgotPasswordDto): Promise<{ message: string }> => {\n    try {\n      const response = await apiClient.post<{ message: string }>('/auth/forgot-password', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  resetPassword: async (data: ResetPasswordDto): Promise<{ message: string }> => {\n    try {\n      const response = await apiClient.post<{ message: string }>('/auth/reset-password', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  changePassword: async (data: ChangePasswordDto): Promise<{ message: string }> => {\n    try {\n      const response = await apiClient.post<{ message: string }>('/auth/change-password', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  logout: async (): Promise<{ message: string }> => {\n    try {\n      const response = await apiClient.post<{ message: string }>('/auth/logout');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  refresh: async (): Promise<AuthResponse> => {\n    try {\n      const response = await apiClient.post<ApiResponse<AuthResponse>>('/auth/refresh');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getProfile: async (): Promise<ProfileResponse> => {\n    try {\n      const response = await apiClient.get<ApiResponse<ProfileResponse>>('/auth/profile');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  updateProfile: async (data: UpdateUserDto): Promise<ProfileResponse> => {\n    try {\n      const response = await apiClient.patch<ApiResponse<ProfileResponse>>('/auth/profile', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  loginWithGoogle: (): void => {\n    window.location.href = `${apiClient.defaults.baseURL}/auth/google`;\n  },\n\n  loginWithApple: (): void => {\n    window.location.href = `${apiClient.defaults.baseURL}/auth/apple`;\n  },\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAeO,MAAM,cAAc;IACzB,UAAU,OAAO;QACf,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAgC,kBAAkB;YACvF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,OAAO,OAAO;QACZ,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAA4B,eAAe;YAChF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,aAAa,OAAO;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAA4B,sBAAsB;YACvF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,YAAY,OAAO;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAsB,qBAAqB;YAChF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,gBAAgB,OAAO;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAsB,yBAAyB;YACpF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,eAAe,OAAO;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAsB,wBAAwB;YACnF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,gBAAgB,OAAO;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAsB,yBAAyB;YACpF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,QAAQ;QACN,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAsB;YAC3D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,SAAS;QACP,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAA4B;YACjE,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,YAAY;QACV,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAA+B;YACnE,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,eAAe,OAAO;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,KAAK,CAA+B,iBAAiB;YACtF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,iBAAiB;QACf,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,0IAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC;IACpE;IAEA,gBAAgB;QACd,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,0IAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC;IACnE;AACF"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/store/authStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { useShallow } from 'zustand/shallow';\nimport { authService } from '../services/auth.service';\nimport type {\n  User,\n  LoginDto,\n  RegisterDto,\n  UpdateUserDto,\n  ProfileResponse,\n} from '../types/auth.types';\nimport { handleApiError } from '../api/error-handler';\n\ninterface AuthState {\n  user: User | null;\n  profile: ProfileResponse | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n  login: (data: LoginDto) => Promise<void>;\n  register: (data: RegisterDto) => Promise<{ userId: string; message: string }>;\n  logout: () => Promise<void>;\n  getProfile: () => Promise<void>;\n  updateProfile: (data: UpdateUserDto) => Promise<void>;\n  checkAuth: () => Promise<void>;\n  clearError: () => void;\n}\n\nexport const useAuthStore = create<AuthState>((set, get) => ({\n  user: null,\n  profile: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n\n  login: async (data) => {\n    set({ isLoading: true, error: null });\n    try {\n      const response = await authService.login(data);\n      set({\n        user: response.user,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  register: async (data) => {\n    set({ isLoading: true, error: null });\n    try {\n      const response = await authService.register(data);\n      set({ isLoading: false });\n      return { userId: response.id, message: response.message };\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  logout: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      await authService.logout();\n      set({\n        user: null,\n        profile: null,\n        isAuthenticated: false,\n        isLoading: false,\n      });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  getProfile: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      const profile = await authService.getProfile();\n      set({\n        profile,\n        user: profile,\n        isAuthenticated: true,\n        isLoading: false,\n      });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  updateProfile: async (data) => {\n    set({ isLoading: true, error: null });\n    try {\n      const profile = await authService.updateProfile(data);\n      set({ profile, user: profile, isLoading: false });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  checkAuth: async () => {\n    try {\n      await get().getProfile();\n    } catch {\n      set({ user: null, profile: null, isAuthenticated: false });\n    }\n  },\n\n  clearError: () => set({ error: null }),\n}));\n\nexport const useAuth = () =>\n  useAuthStore(\n    useShallow((state) => ({\n      user: state.user,\n      isAuthenticated: state.isAuthenticated,\n      isLoading: state.isLoading,\n      error: state.error,\n    }))\n  );\n\nexport const useAuthActions = () => useAuthStore(\n  useShallow((state) => ({\n    login: state.login,\n    register: state.register,\n    logout: state.logout,\n    getProfile: state.getProfile,\n    updateProfile: state.updateProfile,\n    clearError: state.clearError,\n    checkAuth: state.checkAuth,\n  }))\n);"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AAQA;;;;;AAiBO,MAAM,eAAe,IAAA,kJAAM,EAAY,CAAC,KAAK,MAAQ,CAAC;QAC3D,MAAM;QACN,SAAS;QACT,iBAAiB;QACjB,WAAW;QACX,OAAO;QAEP,OAAO,OAAO;YACZ,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YACnC,IAAI;gBACF,MAAM,WAAW,MAAM,iJAAW,CAAC,KAAK,CAAC;gBACzC,IAAI;oBACF,MAAM,SAAS,IAAI;oBACnB,iBAAiB;oBACjB,WAAW;gBACb;YACF,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,UAAU,OAAO;YACf,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YACnC,IAAI;gBACF,MAAM,WAAW,MAAM,iJAAW,CAAC,QAAQ,CAAC;gBAC5C,IAAI;oBAAE,WAAW;gBAAM;gBACvB,OAAO;oBAAE,QAAQ,SAAS,EAAE;oBAAE,SAAS,SAAS,OAAO;gBAAC;YAC1D,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,QAAQ;YACN,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YACnC,IAAI;gBACF,MAAM,iJAAW,CAAC,MAAM;gBACxB,IAAI;oBACF,MAAM;oBACN,SAAS;oBACT,iBAAiB;oBACjB,WAAW;gBACb;YACF,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,YAAY;YACV,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YACnC,IAAI;gBACF,MAAM,UAAU,MAAM,iJAAW,CAAC,UAAU;gBAC5C,IAAI;oBACF;oBACA,MAAM;oBACN,iBAAiB;oBACjB,WAAW;gBACb;YACF,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,eAAe,OAAO;YACpB,IAAI;gBAAE,WAAW;gBAAM,OAAO;YAAK;YACnC,IAAI;gBACF,MAAM,UAAU,MAAM,iJAAW,CAAC,aAAa,CAAC;gBAChD,IAAI;oBAAE;oBAAS,MAAM;oBAAS,WAAW;gBAAM;YACjD,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,WAAW;YACT,IAAI;gBACF,MAAM,MAAM,UAAU;YACxB,EAAE,OAAM;gBACN,IAAI;oBAAE,MAAM;oBAAM,SAAS;oBAAM,iBAAiB;gBAAM;YAC1D;QACF;QAEA,YAAY,IAAM,IAAI;gBAAE,OAAO;YAAK;IACtC,CAAC;AAEM,MAAM,UAAU,IACrB,aACE,IAAA,iKAAU,EAAC,CAAC,QAAU,CAAC;YACrB,MAAM,MAAM,IAAI;YAChB,iBAAiB,MAAM,eAAe;YACtC,WAAW,MAAM,SAAS;YAC1B,OAAO,MAAM,KAAK;QACpB,CAAC;AAGE,MAAM,iBAAiB,IAAM,aAClC,IAAA,iKAAU,EAAC,CAAC,QAAU,CAAC;YACrB,OAAO,MAAM,KAAK;YAClB,UAAU,MAAM,QAAQ;YACxB,QAAQ,MAAM,MAAM;YACpB,YAAY,MAAM,UAAU;YAC5B,eAAe,MAAM,aAAa;YAClC,YAAY,MAAM,UAAU;YAC5B,WAAW,MAAM,SAAS;QAC5B,CAAC"}},
    {"offset": {"line": 514, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/hooks/useAuth.ts"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport { useAuthStore } from '../store/authStore';\n\nexport const useAuthInit = () => {\n  const checkAuth = useAuthStore((state) => state.checkAuth);\n\n  useEffect(() => {\n    const hasCookies = document.cookie.includes('access_token');\n    \n    if (hasCookies) {\n      checkAuth().catch((error) => {\n        console.error('Auth check failed:', error);\n      });\n    }\n  }, [checkAuth]);\n};"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,MAAM,cAAc;IACzB,MAAM,YAAY,IAAA,yIAAY,EAAC,CAAC,QAAU,MAAM,SAAS;IAEzD,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,SAAS,MAAM,CAAC,QAAQ,CAAC;QAE5C,IAAI,YAAY;YACd,YAAY,KAAK,CAAC,CAAC;gBACjB,QAAQ,KAAK,CAAC,sBAAsB;YACtC;QACF;IACF,GAAG;QAAC;KAAU;AAChB"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport { useAuthInit } from '../hooks/useAuth';\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n    useAuthInit();\n\n    return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACjE,IAAA,sIAAW;IAEX,qBAAO;kBAAG;;AACd"}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/TopBar.tsx"],"sourcesContent":["'use client';\n\nexport function TopBar() {\n    return (\n        <div className=\"bg-primary text-white py-2 text-center text-sm font-medium\">\n            <p>\n                üöö <span className=\"font-semibold\">Env√≠o gratis</span> en compras superiores a{' '}\n                <span className=\"font-bold\">$150.000</span>\n            </p>\n        </div>\n    );\n}"],"names":[],"mappings":";;;;;AAAA;;AAEO,SAAS;IACZ,qBACI,8OAAC;QAAI,WAAU;kBACX,cAAA,8OAAC;;gBAAE;8BACI,8OAAC;oBAAK,WAAU;8BAAgB;;;;;;gBAAmB;gBAAyB;8BAC/E,8OAAC;oBAAK,WAAU;8BAAY;;;;;;;;;;;;;;;;;AAI5C"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/services/product.service.ts"],"sourcesContent":["import { apiClient } from '../api/axios-client';\nimport { handleApiError } from '../api/error-handler';\nimport { ApiResponse, unwrapResponse } from '../api/helper';\nimport type { Product, ProductFilters, PaginatedProducts } from '../types/product.types';\n\nexport const productService = {\n  getAll: async (filters?: ProductFilters): Promise<PaginatedProducts> => {\n    try {\n      const response = await apiClient.get<ApiResponse<PaginatedProducts>>('/products', {\n        params: filters,\n      });\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getById: async (id: string): Promise<Product> => {\n    try {\n      const response = await apiClient.get<ApiResponse<Product>>(`/products/${id}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getBySlug: async (slug: string): Promise<Product> => {\n    try {\n      const response = await apiClient.get<ApiResponse<Product>>(`/products/slug/${slug}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getFeatured: async (): Promise<Product[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<Product[]>>('/products/meta/featured');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  search: async (query: string): Promise<Product[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<PaginatedProducts>>('/products', {\n        params: { search: query, limit: 10 },\n      });\n      const paginatedData = unwrapResponse(response.data);\n      return paginatedData.docs;\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getGenders: async (): Promise<string[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<string[]>>('/products/meta/genders');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getCategories: async (): Promise<string[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<string[]>>('/products/meta/categories');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getCategoriesByGender: async (gender: string): Promise<string[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<string[]>>(\n        `/products/meta/genders/${gender}/categories`\n      );\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getSubcategoriesByCategory: async (category: string): Promise<string[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<string[]>>(\n        `/products/meta/categories/${category}/subcategories`\n      );\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,MAAM,iBAAiB;IAC5B,QAAQ,OAAO;QACb,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAiC,aAAa;gBAChF,QAAQ;YACV;YACA,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,SAAS,OAAO;QACd,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAuB,CAAC,UAAU,EAAE,IAAI;YAC5E,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,WAAW,OAAO;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAuB,CAAC,eAAe,EAAE,MAAM;YACnF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,aAAa;QACX,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAyB;YAC7D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,QAAQ,OAAO;QACb,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAiC,aAAa;gBAChF,QAAQ;oBAAE,QAAQ;oBAAO,OAAO;gBAAG;YACrC;YACA,MAAM,gBAAgB,IAAA,sIAAc,EAAC,SAAS,IAAI;YAClD,OAAO,cAAc,IAAI;QAC3B,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,YAAY;QACV,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAwB;YAC5D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,eAAe;QACb,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAwB;YAC5D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,uBAAuB,OAAO;QAC5B,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAClC,CAAC,uBAAuB,EAAE,OAAO,WAAW,CAAC;YAE/C,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,4BAA4B,OAAO;QACjC,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAClC,CAAC,0BAA0B,EAAE,SAAS,cAAc,CAAC;YAEvD,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;AACF"}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/store/productStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { useShallow } from 'zustand/shallow';\nimport { productService } from '../services/product.service';\nimport type { Product, ProductFilters } from '../types/product.types';\nimport { handleApiError } from '../api/error-handler';\n\ninterface ProductState {\n  products: Product[];\n  currentProduct: Product | null;\n  featuredProducts: Product[];\n  categories: string[];\n  genders: string[];\n  pagination: {\n    totalDocs: number;\n    limit: number;\n    page: number;\n    totalPages: number;\n    hasNextPage: boolean;\n    hasPrevPage: boolean;\n  } | null;\n  isLoading: boolean;\n  error: string | null;\n  fetchProducts: (filters?: ProductFilters) => Promise<void>;\n  fetchProductById: (id: string) => Promise<void>;\n  fetchProductBySlug: (slug: string) => Promise<void>;\n  fetchFeatured: () => Promise<void>;\n  fetchGenders: () => Promise<void>;\n  fetchCategoriesByGender: (gender: string) => Promise<string[]>;\n  fetchCategories: () => Promise<void>;\n  fetchSubcategories: (category: string) => Promise<string[]>;\n  searchProducts: (query: string) => Promise<Product[]>;\n  clearCurrentProduct: () => void;\n  clearError: () => void;\n}\n\nexport const useProductStore = create<ProductState>((set) => ({\n  products: [],\n  currentProduct: null,\n  featuredProducts: [],\n  genders: [],\n  categories: [],\n  pagination: null,\n  isLoading: false,\n  error: null,\n\n  fetchProducts: async (filters) => {\n    set({ isLoading: true, error: null });\n    try {\n      const response = await productService.getAll(filters);\n      set({\n        products: response.docs,\n        pagination: {\n          totalDocs: response.totalDocs,\n          limit: response.limit,\n          page: response.page,\n          totalPages: response.totalPages,\n          hasNextPage: response.hasNextPage,\n          hasPrevPage: response.hasPrevPage,\n        },\n        isLoading: false,\n      });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  fetchProductById: async (id) => {\n    set({ isLoading: true, error: null });\n    try {\n      const product = await productService.getById(id);\n      set({ currentProduct: product, isLoading: false });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  fetchProductBySlug: async (slug) => {\n    set({ isLoading: true, error: null });\n    try {\n      const product = await productService.getBySlug(slug);\n      set({ currentProduct: product, isLoading: false });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  fetchFeatured: async () => {\n    set({ isLoading: true, error: null });\n    try {\n      const products = await productService.getFeatured();\n      set({ featuredProducts: products, isLoading: false });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  fetchGenders: async () => {\n    try {\n      console.log('Store - Fetching genders from API...');\n      const genders = await productService.getGenders();\n      console.log('Store - Received genders:', genders);\n      set({ genders });\n      console.log('Store - State updated, current genders:', genders);\n    } catch (error) {\n      const apiError = handleApiError(error);\n      console.error('Store - Error fetching genders:', apiError);\n      set({ error: apiError.message });\n      throw error;\n    }\n  },\n\n  fetchCategoriesByGender: async (gender) => {\n    try {\n      return await productService.getCategoriesByGender(gender);\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message });\n      throw error;\n    }\n  },\n\n\n  fetchCategories: async () => {\n    try {\n      const categories = await productService.getCategories();\n      set({ categories });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message });\n      throw error;\n    }\n  },\n\n  fetchSubcategories: async (category) => {\n    try {\n      return await productService.getSubcategoriesByCategory(category);\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message });\n      throw error;\n    }\n  },\n\n  searchProducts: async (query) => {\n    try {\n      return await productService.search(query);\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message });\n      throw error;\n    }\n  },\n\n  clearCurrentProduct: () => set({ currentProduct: null }),\n\n  clearError: () => set({ error: null }),\n}));\n\nexport const useProducts = () => useProductStore(\n  useShallow((state) => ({\n    products: state.products,\n    currentProduct: state.currentProduct,\n    featuredProducts: state.featuredProducts,\n    genders: state.genders,\n    categories: state.categories,\n    pagination: state.pagination,\n    isLoading: state.isLoading,\n    error: state.error,\n  }))\n);\n\nexport const useProductActions = () => useProductStore(\n  useShallow((state) => ({\n    fetchProducts: state.fetchProducts,\n    fetchProductById: state.fetchProductById,\n    fetchProductBySlug: state.fetchProductBySlug,\n    fetchFeatured: state.fetchFeatured,\n    fetchGenders: state.fetchGenders,\n    fetchCategoriesByGender: state.fetchCategoriesByGender,\n    fetchCategories: state.fetchCategories,\n    fetchSubcategories: state.fetchSubcategories,\n    searchProducts: state.searchProducts,\n    clearCurrentProduct: state.clearCurrentProduct,\n    clearError: state.clearError,\n  }))\n);"],"names":[],"mappings":"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"}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/CategoryDropdown.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport Link from 'next/link';\nimport { ChevronDown } from 'lucide-react';\nimport { useProductActions } from '../../store/productStore';\n\ninterface CategoryDropdownProps {\n    gender: string;\n    label: string;\n    openGender: string | null;\n    setOpenGender: (g: string | null) => void;\n}\n\nexport function CategoryDropdown({ gender, label, openGender, setOpenGender }: CategoryDropdownProps) {\n    const isOpen = openGender === gender;\n    const [categories, setCategories] = useState<string[]>([]);\n    const [activeCategory, setActiveCategory] = useState<string | null>(null);\n    const [subcategories, setSubcategories] = useState<string[]>([]);\n    const [loadingCategories, setLoadingCategories] = useState(false);\n    const [loadingSubcats, setLoadingSubcats] = useState(false);\n\n    const { fetchCategoriesByGender, fetchSubcategories } = useProductActions();\n    const dropdownRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        if (isOpen && categories.length === 0) {\n            setLoadingCategories(true);\n            fetchCategoriesByGender(gender)\n                .then(setCategories)\n                .catch((error) => {\n                    console.error('Failed to fetch categories:', error);\n                    setCategories([]);\n                })\n                .finally(() => setLoadingCategories(false));\n        }\n    }, [isOpen, gender, categories.length, fetchCategoriesByGender]);\n\n    const handleMouseEnter = () => {\n        setOpenGender(gender);\n    };\n\n    const handleMouseLeave = () => {\n        setOpenGender(null);\n        setActiveCategory(null);\n        setSubcategories([]);\n    };\n\n    const handleCategoryHover = async (categorySlug: string) => {\n        if (categorySlug === activeCategory) return;\n\n        setActiveCategory(categorySlug);\n        setLoadingSubcats(true);\n\n        try {\n            const subs = await fetchSubcategories(categorySlug);\n            setSubcategories(subs);\n        } catch (error) {\n            console.error('Failed to fetch subcategories:', error);\n            setSubcategories([]);\n        } finally {\n            setLoadingSubcats(false);\n        }\n    };\n\n    return (\n        <div\n            ref={dropdownRef}\n            className=\"relative\"\n            onMouseEnter={handleMouseEnter}\n        >\n            {/* Trigger */}\n            <button className=\"flex items-center gap-1 px-4 py-2 text-text-muted hover:text-primary transition-colors font-medium\">\n                {label}\n                <ChevronDown\n                    className={`w-4 h-4 transition-transform duration-200 ${isOpen ? 'rotate-180' : ''\n                        }`}\n                />\n            </button>\n\n            {isOpen && (\n                <>\n                    <div className=\"absolute left-0 top-full h-3 w-full bg-transparent\" />\n                    <div className=\"absolute left-0 top-full bg-white shadow-lg border border-border rounded-l-xl rounded-r-none z-50 transition-all duration-200 ease-out data-[open=false]:opacity-0 data-[open=false]:translate-y-1\" data-open={isOpen} onMouseLeave={handleMouseLeave}>\n                        <div className=\"relative flex\">\n                            {/* LEFT - Categories */}\n                            <div className=\"w-[280px] rounded-l-xl\">\n                                {loadingCategories ? (\n                                    <div className=\"p-6\">\n                                        <div className=\"h-8 bg-gray-200 animate-pulse rounded mb-2\" />\n                                        <div className=\"h-8 bg-gray-200 animate-pulse rounded mb-2\" />\n                                        <div className=\"h-8 bg-gray-200 animate-pulse rounded\" />\n                                    </div>\n                                ) : categories.length > 0 ? (\n                                    categories.map((category) => (\n                                        <div key={category} onMouseEnter={() => handleCategoryHover(category)}>\n                                            <Link\n                                                href={`/products?gender=${gender}&category=${category}`}\n                                                className={`block px-6 py-3 hover:bg-accent transition-colors capitalize ${activeCategory === category ? 'bg-accent' : ''\n                                                    }`}\n                                            >\n                                                <span className=\"font-medium text-text-muted\">{category}</span>\n                                            </Link>\n                                        </div>\n                                    ))\n                                ) : (\n                                    <div className=\"p-6 text-sm text-text-muted\">Sin categor√≠as</div>\n                                )}\n                            </div>\n\n                            {/* RIGHT - Subcategories (SIDE PANEL) */}\n                            {activeCategory && (\n                                <div\n                                    className=\"absolute left-full top-0 w-[340px] h-full bg-white shadow-lg rounded-r-xl border border-border opacity-100 translate-x-0 transition-all duration-200 ease-out\"\n                                >\n                                    <div className=\"p-6\">\n                                        <p className=\"text-[11px] font-semibold tracking-widest text-text-muted uppercase mb-2\">\n                                            Subcategor√≠as\n                                        </p>\n                                        <div className=\"h-px bg-border mb-4 opacity-60\" />\n                                        {loadingSubcats ? (\n                                            <div className=\"space-y-2\">\n                                                <div className=\"h-8 bg-gray-200 animate-pulse rounded\" />\n                                                <div className=\"h-8 bg-gray-200 animate-pulse rounded\" />\n                                            </div>\n                                        ) : subcategories.length > 0 ? (\n                                            subcategories.map((sub) => (\n                                                <Link\n                                                    key={sub}\n                                                    href={`/products?gender=${gender}&category=${activeCategory}&subcategory=${sub}`}\n                                                    className=\"group flex items-center px-4 py-2 rounded-lg transition-all duration-200 text-text-secondary capitalize hover:bg-accent hover:text-primary\"\n                                                >\n                                                    <span className=\"mr-2 h-1.5 w-1.5 rounded-full bg-primary opacity-0 group-hover:opacity-100 transition-opacity\" />\n                                                    {sub}\n                                                </Link>\n                                            ))\n                                        ) : (\n                                            <p className=\"text-sm text-text-muted\">Sin subcategor√≠as</p>\n                                        )}\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                </>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1198, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/SearchBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { Search, X } from 'lucide-react';\nimport { useProductActions } from '../../store/productStore';\nimport type { Product } from '../../types/product.types';\n\nexport function SearchBar() {\n    const [isOpen, setIsOpen] = useState(false);\n    const [query, setQuery] = useState('');\n    const [results, setResults] = useState<Product[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n\n    const { searchProducts } = useProductActions();\n    const router = useRouter();\n    const searchRef = useRef<HTMLDivElement>(null);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    useEffect(() => {\n        if (!query.trim()) {\n            setResults([]);\n            return;\n        }\n\n        const timeoutId = setTimeout(async () => {\n            setIsLoading(true);\n            try {\n                const products = await searchProducts(query);\n                setResults(products);\n            } catch (error) {\n                console.error('Search failed:', error);\n                setResults([]);\n            } finally {\n                setIsLoading(false);\n            }\n        }, 300);\n\n        return () => clearTimeout(timeoutId);\n    }, [query, searchProducts]);\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (searchRef.current && !searchRef.current.contains(event.target as Node)) {\n                setIsOpen(false);\n            }\n        };\n\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const handleSearch = (e: React.FormEvent) => {\n        e.preventDefault();\n        if (query.trim()) {\n            router.push(`/products?search=${encodeURIComponent(query)}`);\n            setIsOpen(false);\n            setQuery('');\n        }\n    };\n\n    const handleClear = () => {\n        setQuery('');\n        setResults([]);\n        inputRef.current?.focus();\n    };\n\n    return (\n        <div ref={searchRef} className=\"relative\">\n            {!isOpen && (\n                <button\n                    onClick={() => {\n                        setIsOpen(true);\n                        setTimeout(() => inputRef.current?.focus(), 100);\n                    }}\n                    className=\"p-2 hover:bg-accent rounded-full transition-colors\"\n                    aria-label=\"Buscar\"\n                >\n                    <Search className=\"w-5 h-5 text-text-muted\" />\n                </button>\n            )}\n\n            {isOpen && (\n                <div className=\"absolute right-0 top-full mt-2 w-[400px] bg-white shadow-lg rounded-lg border border-border overflow-hidden z-50\">\n                    <form onSubmit={handleSearch} className=\"p-4\">\n                        <div className=\"relative\">\n                            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted\" />\n                            <input\n                                ref={inputRef}\n                                type=\"text\"\n                                value={query}\n                                onChange={(e) => setQuery(e.target.value)}\n                                placeholder=\"Buscar productos...\"\n                                className=\"w-full pl-10 pr-10 py-2 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20\"\n                            />\n                            {query && (\n                                <button\n                                    type=\"button\"\n                                    onClick={handleClear}\n                                    className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-100 rounded-full\"\n                                    aria-label=\"Limpiar b√∫squeda\"\n                                >\n                                    <X className=\"w-4 h-4 text-text-muted\" />\n                                </button>\n                            )}\n                        </div>\n                    </form>\n\n                    {query && (\n                        <div className=\"max-h-[400px] overflow-y-auto border-t border-border\">\n                            {isLoading ? (\n                                <div className=\"p-8 text-center text-text-muted\">Buscando...</div>\n                            ) : results.length > 0 ? (\n                                <div className=\"p-2\">\n                                    {results.map((product) => (\n                                        <Link\n                                            key={product.id}\n                                            href={`/products/${product.slug}`}\n                                            onClick={() => {\n                                                setIsOpen(false);\n                                                setQuery('');\n                                            }}\n                                            className=\"flex items-center gap-3 p-2 hover:bg-accent rounded-lg transition-colors\"\n                                        >\n                                            <Image\n                                                src={product.images?.[0] || '/placeholder.png'}\n                                                alt={product.name}\n                                                width={50}\n                                                height={50}\n                                                className=\"rounded object-cover\"\n                                            />\n                                            <div className=\"flex-1 min-w-0\">\n                                                <p className=\"font-medium text-text-primary truncate\">{product.name}</p>\n                                                <p className=\"text-sm text-text-muted\">${product.price.toFixed(2)}</p>\n                                            </div>\n                                        </Link>\n                                    ))}\n                                </div>\n                            ) : (\n                                <div className=\"p-8 text-center text-text-muted\">\n                                    No se encontraron productos\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/UserMenu.tsx"],"sourcesContent":["// components/layout/UserMenu.tsx\n'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport { User, LogOut, Package, Heart, Settings } from 'lucide-react';\nimport { useAuth, useAuthActions } from '../../store/authStore';\n\nexport function UserMenu() {\n    const { isAuthenticated, user } = useAuth();\n    const { logout } = useAuthActions();\n    const router = useRouter();\n    const [isOpen, setIsOpen] = useState(false);\n    const menuRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        const handleClickOutside = (event: MouseEvent) => {\n            if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n                setIsOpen(false);\n            }\n        };\n\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    const handleLogout = async () => {\n        try {\n            await logout();\n            setIsOpen(false);\n            router.push('/');\n        } catch (error) {\n            console.error('Logout failed:', error);\n        }\n    };\n\n    if (!isAuthenticated) {\n        return (\n            <Link\n                href=\"/login\"\n                className=\"p-2 hover:bg-accent rounded-full transition-colors\"\n                aria-label=\"Iniciar sesi√≥n\"\n            >\n                <User className=\"w-5 h-5 text-text-muted\" />\n            </Link>\n        );\n    }\n\n    return (\n        <div ref={menuRef} className=\"relative\">\n            <button\n                onClick={() => setIsOpen(!isOpen)}\n                className=\"p-2 hover:bg-accent rounded-full transition-colors\"\n                aria-label=\"Men√∫ de usuario\"\n            >\n                {user?.avatar ? (\n                    <Image\n                        src={user.avatar}\n                        alt={user.name}\n                        className=\"w-8 h-8 rounded-full object-cover\"\n                    />\n                ) : (\n                    <div className=\"w-8 h-8 rounded-full bg-primary flex items-center justify-center\">\n                        <span className=\"text-white text-sm font-semibold\">\n                            {user?.name.charAt(0).toUpperCase()}\n                        </span>\n                    </div>\n                )}\n            </button>\n\n            {isOpen && (\n                <div className=\"absolute right-0 top-full mt-2 w-56 bg-white shadow-lg rounded-lg border border-border overflow-hidden z-50\">\n                    <div className=\"px-4 py-3 border-b border-border\">\n                        <p className=\"font-medium text-text-primary truncate\">{user?.name}</p>\n                        <p className=\"text-sm text-text-muted truncate\">{user?.email}</p>\n                    </div>\n\n                    <div className=\"py-2\">\n                        <Link\n                            href=\"/profile\"\n                            onClick={() => setIsOpen(false)}\n                            className=\"flex items-center gap-3 px-4 py-2 hover:bg-accent transition-colors text-text-secondary\"\n                        >\n                            <Settings className=\"w-4 h-4\" />\n                            Mi Perfil\n                        </Link>\n\n                        <Link\n                            href=\"/orders\"\n                            onClick={() => setIsOpen(false)}\n                            className=\"flex items-center gap-3 px-4 py-2 hover:bg-accent transition-colors text-text-secondary\"\n                        >\n                            <Package className=\"w-4 h-4\" />\n                            Mis √ìrdenes\n                        </Link>\n\n                        <Link\n                            href=\"/wishlist\"\n                            onClick={() => setIsOpen(false)}\n                            className=\"flex items-center gap-3 px-4 py-2 hover:bg-accent transition-colors text-text-secondary\"\n                        >\n                            <Heart className=\"w-4 h-4\" />\n                            Lista de Deseos\n                        </Link>\n                    </div>\n\n                    <div className=\"border-t border-border\">\n                        <button\n                            onClick={handleLogout}\n                            className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 transition-colors text-red-600\"\n                        >\n                            <LogOut className=\"w-4 h-4\" />\n                            Cerrar Sesi√≥n\n                        </button>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AAGjC;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAPA;;;;;;;;AASO,SAAS;IACZ,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,GAAG,IAAA,oIAAO;IACzC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,2IAAc;IACjC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,UAAU,IAAA,+MAAM,EAAiB;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,qBAAqB,CAAC;YACxB,IAAI,QAAQ,OAAO,IAAI,CAAC,QAAQ,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GAAW;gBACpE,UAAU;YACd;QACJ;QAEA,SAAS,gBAAgB,CAAC,aAAa;QACvC,OAAO,IAAM,SAAS,mBAAmB,CAAC,aAAa;IAC3D,GAAG,EAAE;IAEL,MAAM,eAAe;QACjB,IAAI;YACA,MAAM;YACN,UAAU;YACV,OAAO,IAAI,CAAC;QAChB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,kBAAkB;QACpC;IACJ;IAEA,IAAI,CAAC,iBAAiB;QAClB,qBACI,8OAAC,uKAAI;YACD,MAAK;YACL,WAAU;YACV,cAAW;sBAEX,cAAA,8OAAC,0MAAI;gBAAC,WAAU;;;;;;;;;;;IAG5B;IAEA,qBACI,8OAAC;QAAI,KAAK;QAAS,WAAU;;0BACzB,8OAAC;gBACG,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;gBACV,cAAW;0BAEV,MAAM,uBACH,8OAAC,wIAAK;oBACF,KAAK,KAAK,MAAM;oBAChB,KAAK,KAAK,IAAI;oBACd,WAAU;;;;;yCAGd,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAK,WAAU;kCACX,MAAM,KAAK,OAAO,GAAG;;;;;;;;;;;;;;;;YAMrC,wBACG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CAA0C,MAAM;;;;;;0CAC7D,8OAAC;gCAAE,WAAU;0CAAoC,MAAM;;;;;;;;;;;;kCAG3D,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uKAAI;gCACD,MAAK;gCACL,SAAS,IAAM,UAAU;gCACzB,WAAU;;kDAEV,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAIpC,8OAAC,uKAAI;gCACD,MAAK;gCACL,SAAS,IAAM,UAAU;gCACzB,WAAU;;kDAEV,8OAAC,mNAAO;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAInC,8OAAC,uKAAI;gCACD,MAAK;gCACL,SAAS,IAAM,UAAU;gCACzB,WAAU;;kDAEV,8OAAC,6MAAK;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;kCAKrC,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BACG,SAAS;4BACT,WAAU;;8CAEV,8OAAC,oNAAM;oCAAC,WAAU;;;;;;gCAAY;;;;;;;;;;;;;;;;;;;;;;;;AAQ1D"}},
    {"offset": {"line": 1686, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/services/cart.service.ts"],"sourcesContent":["import { apiClient } from '../api/axios-client';\nimport { handleApiError } from '../api/error-handler';\nimport { ApiResponse, unwrapResponse } from '../api/helper';\nimport type { Cart, AddToCartDto, UpdateCartItemDto, RemoveCartItemDto } from '../types/cart.types';\n\nexport const cartService = {\n  getCart: async (): Promise<Cart> => {\n    try {\n      const response = await apiClient.get<ApiResponse<Cart>>('/cart');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  addToCart: async (data: AddToCartDto): Promise<{ cart: Cart; anonymousId?: string }> => {\n    try {\n      const response = await apiClient.post<{ cart: Cart; anonymousId?: string }>('/cart/items', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  updateCartItem: async (data: UpdateCartItemDto): Promise<Cart> => {\n    try {\n      const response = await apiClient.patch<ApiResponse<Cart>>('/cart/items', data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  removeFromCart: async (data: RemoveCartItemDto): Promise<Cart> => {\n    try {\n      const response = await apiClient.delete<ApiResponse<Cart>>('/cart/items', { data });\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  clearCart: async (): Promise<Cart> => {\n    try {\n      const response = await apiClient.delete<ApiResponse<Cart>>('/cart');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  mergeCart: async (): Promise<{ cart: Cart }> => {\n    try {\n      const response = await apiClient.post<{ cart: Cart }>('/cart/merge');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAGO,MAAM,cAAc;IACzB,SAAS;QACP,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAoB;YACxD,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,WAAW,OAAO;QAChB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAuC,eAAe;YAC3F,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,gBAAgB,OAAO;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,KAAK,CAAoB,eAAe;YACzE,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,gBAAgB,OAAO;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAoB,eAAe;gBAAE;YAAK;YACjF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,WAAW;QACT,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAoB;YAC3D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,WAAW;QACT,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAiB;YACtD,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;AACF"}},
    {"offset": {"line": 1752, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/store/cartStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { useShallow } from 'zustand/shallow';\nimport { cartService } from '../services/cart.service';\nimport type {\n    Cart,\n    AddToCartDto,\n    UpdateCartItemDto,\n    RemoveCartItemDto,\n} from '../types/cart.types';\nimport { handleApiError } from '../api/error-handler';\n\ninterface CartState {\n    cart: Cart | null;\n    isLoading: boolean;\n    error: string | null;\n    fetchCart: () => Promise<void>;\n    addToCart: (data: AddToCartDto) => Promise<void>;\n    updateCartItem: (data: UpdateCartItemDto) => Promise<void>;\n    removeFromCart: (data: RemoveCartItemDto) => Promise<void>;\n    clearCart: () => Promise<void>;\n    clearError: () => void;\n}\n\nexport const useCartStore = create<CartState>((set) => ({\n    cart: null,\n    isLoading: false,\n    error: null,\n\n    fetchCart: async () => {\n        set({ isLoading: true });\n        try {\n            const cart = await cartService.getCart();\n            set({ cart, isLoading: false });\n        } catch (error) {\n            const apiError = handleApiError(error);\n            set({ error: apiError.message, isLoading: false });\n            throw error;\n        }\n    },\n\n    addToCart: async (data) => {\n        set({ isLoading: true });\n        try {\n            const { cart } = await cartService.addToCart(data);\n            set({ cart, isLoading: false });\n        } catch (error) {\n            const apiError = handleApiError(error);\n            set({ error: apiError.message, isLoading: false });\n            throw error;\n        }\n    },\n\n    updateCartItem: async (data) => {\n        set({ isLoading: true });\n        try {\n            const cart = await cartService.updateCartItem(data);\n            set({ cart, isLoading: false });\n        } catch (error) {\n            const apiError = handleApiError(error);\n            set({ error: apiError.message, isLoading: false });\n            throw error;\n        }\n    },\n\n    removeFromCart: async (data) => {\n        set({ isLoading: true });\n        try {\n            const cart = await cartService.removeFromCart(data);\n            set({ cart, isLoading: false });\n        } catch (error) {\n            const apiError = handleApiError(error);\n            set({ error: apiError.message, isLoading: false });\n            throw error;\n        }\n    },\n\n    clearCart: async () => {\n        set({ isLoading: true });\n        try {\n            const cart = await cartService.clearCart();\n            set({ cart, isLoading: false });\n        } catch (error) {\n            const apiError = handleApiError(error);\n            set({ error: apiError.message, isLoading: false });\n            throw error;\n        }\n    },\n\n    clearError: () => set({ error: null }),\n}));\n\n\nexport const useCart = () => useCartStore(\n    useShallow((state) => ({\n        cart: state.cart,\n        isLoading: state.isLoading,\n        error: state.error,\n    }))\n);\n\nexport const useCartActions = () => useCartStore(\n    useShallow((state) => ({\n        fetchCart: state.fetchCart,\n        addToCart: state.addToCart,\n        updateCartItem: state.updateCartItem,\n        removeFromCart: state.removeFromCart,\n        clearCart: state.clearCart,\n        clearError: state.clearError,\n    }))\n);"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AAOA;;;;;AAcO,MAAM,eAAe,IAAA,kJAAM,EAAY,CAAC,MAAQ,CAAC;QACpD,MAAM;QACN,WAAW;QACX,OAAO;QAEP,WAAW;YACP,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACA,MAAM,OAAO,MAAM,iJAAW,CAAC,OAAO;gBACtC,IAAI;oBAAE;oBAAM,WAAW;gBAAM;YACjC,EAAE,OAAO,OAAO;gBACZ,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACV;QACJ;QAEA,WAAW,OAAO;YACd,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACA,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,iJAAW,CAAC,SAAS,CAAC;gBAC7C,IAAI;oBAAE;oBAAM,WAAW;gBAAM;YACjC,EAAE,OAAO,OAAO;gBACZ,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACV;QACJ;QAEA,gBAAgB,OAAO;YACnB,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACA,MAAM,OAAO,MAAM,iJAAW,CAAC,cAAc,CAAC;gBAC9C,IAAI;oBAAE;oBAAM,WAAW;gBAAM;YACjC,EAAE,OAAO,OAAO;gBACZ,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACV;QACJ;QAEA,gBAAgB,OAAO;YACnB,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACA,MAAM,OAAO,MAAM,iJAAW,CAAC,cAAc,CAAC;gBAC9C,IAAI;oBAAE;oBAAM,WAAW;gBAAM;YACjC,EAAE,OAAO,OAAO;gBACZ,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACV;QACJ;QAEA,WAAW;YACP,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACA,MAAM,OAAO,MAAM,iJAAW,CAAC,SAAS;gBACxC,IAAI;oBAAE;oBAAM,WAAW;gBAAM;YACjC,EAAE,OAAO,OAAO;gBACZ,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACV;QACJ;QAEA,YAAY,IAAM,IAAI;gBAAE,OAAO;YAAK;IACxC,CAAC;AAGM,MAAM,UAAU,IAAM,aACzB,IAAA,iKAAU,EAAC,CAAC,QAAU,CAAC;YACnB,MAAM,MAAM,IAAI;YAChB,WAAW,MAAM,SAAS;YAC1B,OAAO,MAAM,KAAK;QACtB,CAAC;AAGE,MAAM,iBAAiB,IAAM,aAChC,IAAA,iKAAU,EAAC,CAAC,QAAU,CAAC;YACnB,WAAW,MAAM,SAAS;YAC1B,WAAW,MAAM,SAAS;YAC1B,gBAAgB,MAAM,cAAc;YACpC,gBAAgB,MAAM,cAAc;YACpC,WAAW,MAAM,SAAS;YAC1B,YAAY,MAAM,UAAU;QAChC,CAAC"}},
    {"offset": {"line": 1888, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/CartIcon.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect } from 'react';\nimport Link from 'next/link';\nimport { ShoppingCart } from 'lucide-react';\nimport { useCart, useCartActions } from '../../store/cartStore';\n\nexport function CartIcon() {\n    const { cart } = useCart();\n    const { fetchCart } = useCartActions();\n\n    useEffect(() => {\n        fetchCart();\n    }, [fetchCart]);\n\n    const itemCount = cart?.itemCount || 0;\n\n    return (\n        <Link\n            href=\"/cart\"\n            className=\"relative p-2 hover:bg-accent rounded-full transition-colors\"\n            aria-label=\"Carrito de compras\"\n        >\n            <ShoppingCart className=\"w-5 h-5 text-text-muted\" />\n            {itemCount > 0 && (\n                <span className=\"absolute -top-1 -right-1 bg-primary text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center\">\n                    {itemCount > 9 ? '9+' : itemCount}\n                </span>\n            )}\n        </Link>\n    );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOO,SAAS;IACZ,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,oIAAO;IACxB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,2IAAc;IAEpC,IAAA,kNAAS,EAAC;QACN;IACJ,GAAG;QAAC;KAAU;IAEd,MAAM,YAAY,MAAM,aAAa;IAErC,qBACI,8OAAC,uKAAI;QACD,MAAK;QACL,WAAU;QACV,cAAW;;0BAEX,8OAAC,sOAAY;gBAAC,WAAU;;;;;;YACvB,YAAY,mBACT,8OAAC;gBAAK,WAAU;0BACX,YAAY,IAAI,OAAO;;;;;;;;;;;;AAK5C"}},
    {"offset": {"line": 1943, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/services/user.service.ts"],"sourcesContent":["import { apiClient } from '../api/axios-client';\nimport { handleApiError } from '../api/error-handler';\nimport { ApiResponse, unwrapResponse } from '../api/helper';\nimport type { Product } from '../types/product.types';\nimport type { AdminUserResponse, UpdateUserAdminDto } from '../types/user.types';\n\nexport const userService = {\n  getWishlist: async (): Promise<Product[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<Product[]>>('/users/me/wishlist');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  addToWishlist: async (productId: string): Promise<string[]> => {\n    try {\n      const response = await apiClient.post<string[]>(`/users/me/wishlist/${productId}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  removeFromWishlist: async (productId: string): Promise<string[]> => {\n    try {\n      const response = await apiClient.delete<string[]>(`/users/me/wishlist/${productId}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  clearWishlist: async (): Promise<string[]> => {\n    try {\n      const response = await apiClient.delete<string[]>('/users/me/wishlist');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  // Admin endpoints\n  getAllUsers: async (): Promise<AdminUserResponse[]> => {\n    try {\n      const response = await apiClient.get<ApiResponse<AdminUserResponse[]>>('/users');\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  getUserById: async (id: string): Promise<AdminUserResponse> => {\n    try {\n      const response = await apiClient.get<ApiResponse<AdminUserResponse>>(`/users/${id}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  updateUser: async (id: string, data: UpdateUserAdminDto): Promise<AdminUserResponse> => {\n    try {\n      const response = await apiClient.patch<ApiResponse<AdminUserResponse>>(`/users/${id}`, data);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n\n  deleteUser: async (id: string): Promise<AdminUserResponse> => {\n    try {\n      const response = await apiClient.delete<ApiResponse<AdminUserResponse>>(`/users/${id}`);\n      return unwrapResponse(response.data);\n    } catch (error) {\n      throw handleApiError(error);\n    }\n  },\n};"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAIO,MAAM,cAAc;IACzB,aAAa;QACX,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAyB;YAC7D,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,eAAe,OAAO;QACpB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,IAAI,CAAW,CAAC,mBAAmB,EAAE,WAAW;YACjF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,oBAAoB,OAAO;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAW,CAAC,mBAAmB,EAAE,WAAW;YACnF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,eAAe;QACb,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAW;YAClD,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,kBAAkB;IAClB,aAAa;QACX,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAmC;YACvE,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,aAAa,OAAO;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,GAAG,CAAiC,CAAC,OAAO,EAAE,IAAI;YACnF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,YAAY,OAAO,IAAY;QAC7B,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,KAAK,CAAiC,CAAC,OAAO,EAAE,IAAI,EAAE;YACvF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;IAEA,YAAY,OAAO;QACjB,IAAI;YACF,MAAM,WAAW,MAAM,0IAAS,CAAC,MAAM,CAAiC,CAAC,OAAO,EAAE,IAAI;YACtF,OAAO,IAAA,sIAAc,EAAC,SAAS,IAAI;QACrC,EAAE,OAAO,OAAO;YACd,MAAM,IAAA,gJAAc,EAAC;QACvB;IACF;AACF"}},
    {"offset": {"line": 2024, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/store/wishlistStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { useShallow } from 'zustand/shallow';\nimport { userService } from '../services/user.service';\nimport type { Product } from '../types/product.types';\nimport { handleApiError } from '../api/error-handler';\n\ninterface WishlistState {\n  items: Product[];\n  isLoading: boolean;\n  error: string | null;\n  fetchWishlist: () => Promise<void>;\n  addToWishlist: (productId: string) => Promise<void>;\n  removeFromWishlist: (productId: string) => Promise<void>;\n  clearWishlist: () => Promise<void>;\n  isInWishlist: (productId: string) => boolean;\n  clearError: () => void;\n}\n\nexport const useWishlistStore = create<WishlistState>((set, get) => ({\n  items: [],\n  isLoading: false,\n  error: null,\n\n  fetchWishlist: async () => {\n    set({ isLoading: true });\n    try {\n      const items = await userService.getWishlist();\n      set({ items, isLoading: false });\n    } catch (error) {\n      const apiError = handleApiError(error);\n      set({ error: apiError.message, isLoading: false });\n      throw error;\n    }\n  },\n\n  addToWishlist: async (productId) => {\n    await userService.addToWishlist(productId);\n    await get().fetchWishlist();\n  },\n\n  removeFromWishlist: async (productId) => {\n    await userService.removeFromWishlist(productId);\n    await get().fetchWishlist();\n  },\n\n  clearWishlist: async () => {\n    await userService.clearWishlist();\n    set({ items: [] });\n  },\n\n  isInWishlist: (productId) =>\n    get().items.some((item) => item.id === productId),\n\n  clearError: () => set({ error: null }),\n}));\n\n\nexport const useWishlist = () => useWishlistStore(\n  useShallow((state) => ({\n    items: state.items,\n    isLoading: state.isLoading,\n    error: state.error,\n    count: state.items.length,\n  }))\n);\n\nexport const useWishlistActions = () => useWishlistStore((state) => ({\n  fetchWishlist: state.fetchWishlist,\n  addToWishlist: state.addToWishlist,\n  removeFromWishlist: state.removeFromWishlist,\n  clearWishlist: state.clearWishlist,\n  isInWishlist: state.isInWishlist,\n  clearError: state.clearError,\n}));"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AAEA;;;;;AAcO,MAAM,mBAAmB,IAAA,kJAAM,EAAgB,CAAC,KAAK,MAAQ,CAAC;QACnE,OAAO,EAAE;QACT,WAAW;QACX,OAAO;QAEP,eAAe;YACb,IAAI;gBAAE,WAAW;YAAK;YACtB,IAAI;gBACF,MAAM,QAAQ,MAAM,iJAAW,CAAC,WAAW;gBAC3C,IAAI;oBAAE;oBAAO,WAAW;gBAAM;YAChC,EAAE,OAAO,OAAO;gBACd,MAAM,WAAW,IAAA,gJAAc,EAAC;gBAChC,IAAI;oBAAE,OAAO,SAAS,OAAO;oBAAE,WAAW;gBAAM;gBAChD,MAAM;YACR;QACF;QAEA,eAAe,OAAO;YACpB,MAAM,iJAAW,CAAC,aAAa,CAAC;YAChC,MAAM,MAAM,aAAa;QAC3B;QAEA,oBAAoB,OAAO;YACzB,MAAM,iJAAW,CAAC,kBAAkB,CAAC;YACrC,MAAM,MAAM,aAAa;QAC3B;QAEA,eAAe;YACb,MAAM,iJAAW,CAAC,aAAa;YAC/B,IAAI;gBAAE,OAAO,EAAE;YAAC;QAClB;QAEA,cAAc,CAAC,YACb,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;QAEzC,YAAY,IAAM,IAAI;gBAAE,OAAO;YAAK;IACtC,CAAC;AAGM,MAAM,cAAc,IAAM,iBAC/B,IAAA,iKAAU,EAAC,CAAC,QAAU,CAAC;YACrB,OAAO,MAAM,KAAK;YAClB,WAAW,MAAM,SAAS;YAC1B,OAAO,MAAM,KAAK;YAClB,OAAO,MAAM,KAAK,CAAC,MAAM;QAC3B,CAAC;AAGI,MAAM,qBAAqB,IAAM,iBAAiB,CAAC,QAAU,CAAC;YACnE,eAAe,MAAM,aAAa;YAClC,eAAe,MAAM,aAAa;YAClC,oBAAoB,MAAM,kBAAkB;YAC5C,eAAe,MAAM,aAAa;YAClC,cAAc,MAAM,YAAY;YAChC,YAAY,MAAM,UAAU;QAC9B,CAAC"}},
    {"offset": {"line": 2100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ivane/OneDrive/Escritorio/LaPilcha-Ecommerce/frontend/src/components/layout/Navbar.tsx"],"sourcesContent":["'use client';\n\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useEffect, useState } from 'react';\nimport { Heart } from 'lucide-react';\nimport { TopBar } from './TopBar';\nimport { CategoryDropdown } from './CategoryDropdown';\nimport { SearchBar } from './SearchBar';\nimport { UserMenu } from './UserMenu';\nimport { CartIcon } from './CartIcon';\nimport { useAuth } from '../../store/authStore';\nimport { useWishlist } from '../../store/wishlistStore';\nimport { useProductActions, useProducts } from '../../store/productStore';\n\nexport function Navbar() {\n  const { isAuthenticated } = useAuth();\n  const { count: wishlistCount } = useWishlist();\n  const { genders } = useProducts();\n  const { fetchGenders } = useProductActions();\n  const [openGender, setOpenGender] = useState<string | null>(null);\n\n  useEffect(() => {\n    fetchGenders().catch((error) => {\n      console.error('Failed to fetch genders:', error);\n    });\n  }, [fetchGenders]);\n\n  const genderLabels: Record<string, string> = {\n    male: 'Hombre',\n    female: 'Mujer',\n    kid: 'Ni√±o',\n    unisex: 'Unisex',\n  };\n\n  return (\n    <header className=\"sticky top-0 z-40 bg-white shadow-sm\">\n      <TopBar />\n\n      <nav className=\"max-w-7xl mx-auto px-4 py-4\">\n        <div className=\"flex items-center justify-between\">\n          {/* Left - Gender Categories */}\n          <div className=\"flex items-center gap-2\">\n            {genders.length > 0 ? (\n              genders.map((gender) => (\n                <CategoryDropdown\n                  key={gender}\n                  gender={gender}\n                  label={genderLabels[gender] || gender}\n                  openGender={openGender}\n                  setOpenGender={setOpenGender}\n                />\n              ))\n            ) : (\n              <>\n                <div className=\"h-10 w-20 bg-gray-200 animate-pulse rounded\" />\n                <div className=\"h-10 w-20 bg-gray-200 animate-pulse rounded\" />\n                <div className=\"h-10 w-20 bg-gray-200 animate-pulse rounded\" />\n              </>\n            )}\n          </div>\n\n          {/* Center - Logo */}\n          <Link href=\"/\" className=\"absolute left-1/2 -translate-x-1/2\">\n            <Image src=\"/LOGO_LA_PILCHA.png\" alt=\"Logo\" width={100} height={100} />\n          </Link>\n\n          {/* Right - Actions */}\n          <div className=\"flex items-center gap-2\">\n            <SearchBar />\n\n            {isAuthenticated && (\n              <Link\n                href=\"/wishlist\"\n                className=\"relative p-2 hover:bg-accent rounded-full transition-colors\"\n                aria-label=\"Lista de deseos\"\n              >\n                <Heart className=\"w-5 h-5 text-text-primary\" />\n                {wishlistCount > 0 && (\n                  <span className=\"absolute -top-1 -right-1 bg-primary text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center\">\n                    {wishlistCount > 9 ? '9+' : wishlistCount}\n                  </span>\n                )}\n              </Link>\n            )}\n\n            <UserMenu />\n            <CartIcon />\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;;;;;;;;;;;;;AAeO,SAAS;IACd,MAAM,EAAE,eAAe,EAAE,GAAG,IAAA,oIAAO;IACnC,MAAM,EAAE,OAAO,aAAa,EAAE,GAAG,IAAA,4IAAW;IAC5C,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,2IAAW;IAC/B,MAAM,EAAE,YAAY,EAAE,GAAG,IAAA,iJAAiB;IAC1C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAgB;IAE5D,IAAA,kNAAS,EAAC;QACR,eAAe,KAAK,CAAC,CAAC;YACpB,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF,GAAG;QAAC;KAAa;IAEjB,MAAM,eAAuC;QAC3C,MAAM;QACN,QAAQ;QACR,KAAK;QACL,QAAQ;IACV;IAEA,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC,gJAAM;;;;;0BAEP,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACZ,QAAQ,MAAM,GAAG,IAChB,QAAQ,GAAG,CAAC,CAAC,uBACX,8OAAC,oKAAgB;oCAEf,QAAQ;oCACR,OAAO,YAAY,CAAC,OAAO,IAAI;oCAC/B,YAAY;oCACZ,eAAe;mCAJV;;;;0DAQT;;kDACE,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;sCAMrB,8OAAC,uKAAI;4BAAC,MAAK;4BAAI,WAAU;sCACvB,cAAA,8OAAC,wIAAK;gCAAC,KAAI;gCAAsB,KAAI;gCAAO,OAAO;gCAAK,QAAQ;;;;;;;;;;;sCAIlE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,sJAAS;;;;;gCAET,iCACC,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;oCACV,cAAW;;sDAEX,8OAAC,6MAAK;4CAAC,WAAU;;;;;;wCAChB,gBAAgB,mBACf,8OAAC;4CAAK,WAAU;sDACb,gBAAgB,IAAI,OAAO;;;;;;;;;;;;8CAMpC,8OAAC,oJAAQ;;;;;8CACT,8OAAC,oJAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrB"}}]
}